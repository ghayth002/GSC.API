# GsC API Architecture Diagram

## System Architecture

```
+-------------------+      +-------------------+      +-------------------+
|                   |      |                   |      |                   |
|  Client           |      |  API Controllers  |      |  Services         |
|  (React/Angular)  +----->+  (AuthController) +----->+  (AuthService)    |
|                   |      |  (UsersController)|      |  (EmailService)   |
|                   |      |                   |      |                   |
+-------------------+      +-------------------+      +--------+----------+
                                                               |
                                                               |
                                                               v
+-------------------+      +-------------------+      +-------------------+
|                   |      |                   |      |                   |
|  Database         |      |  DbContext        |      |  Models           |
|  (SQL Server)     |<-----+  (ApplicationDb   |<-----+  (User, Role)     |
|                   |      |   Context)        |      |  (Permission)     |
|                   |      |                   |      |                   |
+-------------------+      +-------------------+      +-------------------+
```

## Authentication Flow

```
+-------------+     +-------------+     +-------------+     +-------------+
|             |     |             |     |             |     |             |
|  Register   +---->+  Verify     +---->+  Login      +---->+  JWT Token  |
|  User       |     |  Email      |     |  User       |     |  Generated  |
|             |     |             |     |             |     |             |
+-------------+     +-------------+     +-------------+     +------+------+
                                                                   |
                                                                   v
+-------------+     +-------------+     +-------------+     +-------------+
|             |     |             |     |             |     |             |
|  Access     |     |  Check      |     |  Check      |     |  Include    |
|  Protected  +---->+  User       +---->+  User       |<----+  Token in   |
|  Resources  |     |  Roles      |     |  Permissions|     |  Requests   |
|             |     |             |     |             |     |             |
+-------------+     +-------------+     +-------------+     +-------------+
```

## Database Entity Relationships

```
+-------------+     +-------------+     +-------------+
|             |     |             |     |             |
|    User     +-----+  UserRole   +-----+    Role     |
|             |     |             |     |             |
+-------------+     +-------------+     +------+------+
                                               |
                                               |
                                               v
                                        +-------------+     +-------------+
                                        |             |     |             |
                                        |  RolePermi  +-----+ Permission  |
                                        |    ssion    |     |             |
                                        |             |     |             |
                                        +-------------+     +-------------+

+-------------+     +-------------+     +-------------+
|             |     |             |     |             |
|   Flight    +-----+   Order     +-----+  OrderLine  |
|             |     |             |     |             |
+-------------+     +------+------+     +------+------+
                           |                   |
                           |                   |
                           v                   v
                    +-------------+     +-------------+
                    |             |     |             |
                    |    Menu     +-----+  MenuItem   |
                    |             |     |             |
                    +-------------+     +-------------+

+-------------+     +-------------+
|             |     |             |
| MedicalBox  +-----+ MedicalBox  |
|             |     |    Item     |
+-------------+     +-------------+
```

## Request Processing Pipeline

```
+-------------+     +-------------+     +-------------+     +-------------+
|             |     |             |     |             |     |             |
|  HTTP       +---->+  Middleware +---->+ Controller  +---->+  Service    |
|  Request    |     |  Pipeline   |     |  Action     |     |  Method     |
|             |     |             |     |             |     |             |
+-------------+     +-------------+     +-------------+     +------+------+
                                                                   |
                                                                   v
+-------------+     +-------------+     +-------------+     +-------------+
|             |     |             |     |             |     |             |
|  HTTP       |     |  Controller |     |  Service    |<----+  Database   |
|  Response   |<----+  Response  |<----+  Result     |     |  Operation  |
|             |     |             |     |             |     |             |
+-------------+     +-------------+     +-------------+     +-------------+
```